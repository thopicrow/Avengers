{% extends 'base.html.twig' %}


{% block title %}{{ parent() }} | detail sortie{% endblock %}

{% block body %}
    <h1>Detail</h1>

    {% if app.user == sortie.user  and sortie.dateHeureDebut > date() and  sortie.etat.libelle != 'Annulée' %}
        {{ form_start(sortieForm) }}
        {{ form_row(sortieForm.nom) }}
        {{ form_row(sortieForm.dateHeureDebut) }}
        {{ form_row(sortieForm.dateLimiteInscription) }}
        {{ form_row(sortieForm.nbInscriptionMax) }}
        {{ form_row(sortieForm.duree) }}
        {{ form_row(sortieForm.infosSortie) }}
        {{ form_row(sortieForm.lieu) }}

        <div>
            <a class="btn" href="#" id="lien_annuler" onclick="javascript:show('show','lien_annuler'); return false;">Annuler la sortie ?</a>
            <div id="show" style="display: none" class="input-field col s12">
                {{ form_row((sortieForm.annuler)) }}
                {#                <a class="btn" href="{{ path('sortie_annuler', {"id":sortie.id}) }}">Annuler la sortie</a>#}
            </div>
        </div>
        <input type="submit" class="btn" value="Enregistrer">

        {{ form_end(sortieForm) }}
        <a href="{{ path('home') }}" class="btn">Retour</a>
    {% else %}
        <ul>
            <li>nom de la sortie : {{ sortie.nom }}</li>
            <li>date heure debut : {{ sortie.dateHeureDebut | date("d/m/Y") }}</li>
            <li>nombre max inscription : {{ sortie.nbInscriptionMax }}</li>
            <li>durée : {{ sortie.duree }}</li>
            <li>infos de la sortie : {{ sortie.infosSortie }}</li>
            <li>lieu : {{ sortie.lieu.nom }}</li>
            <li>rue : {{ sortie.lieu.rue }}</li>
            <li>ville : {{ sortie.lieu.ville.nom }}</li>
            <li>code postal : {{ sortie.lieu.ville.zipCode }}</li>
            <li>latitude : {{ sortie.lieu.latitude }}</li>
            <li>longitude : {{ sortie.lieu.longitude }}</li>
            {% if sortie.annuler != null %}
                <li>Raison de l'annulation : {{ sortie.annuler }}</li>
            {% endif %}
        </ul>
    {% endif %}

    <table class="striped tableau">
        <thead>
        <tr>
            <th>Pseudo</th>
            <th>Prénom Nom</th>
        </tr>
        </thead>
        <tbody class="tableau tableau-detail">
            {% for participant in sortie.inscrits.values %}
                <tr>
                    <td>
                        <a href="{{ path('user_afficher', {"id":participant.id}) }}">
                            {{ participant.username }}
                        </a>
                    </td>
                    <td>{{ participant.prenom }} {{ participant.nom }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock %}

