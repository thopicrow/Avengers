{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} | Ajout sortie{% endblock %}

{% block body %}
    <h1>Ajout d'une sortie</h1>

    {{ form_start(sortieForm) }}
    {{ form_row(sortieForm.nom) }}
    {{ form_row(sortieForm.dateHeureDebut) }}
    {{ form_row(sortieForm.dateLimiteInscription) }}
    {{ form_row(sortieForm.nbInscriptionMax) }}
    {{ form_row(sortieForm.duree) }}
    {{ form_row(sortieForm.infosSortie) }}
    {{ form_row(sortieForm.lieu) }}

    <div id="adresse" style="display: none">


        <p>Ca s'affiche ! :)</p>
        {#<p>Ville : {{ lieu.ville.nom }}</p>
        <p>Rue : {{ lieu.rue }}</p>
        <p>Code postal : {{ lieu.ville.zipCode }}</p>
        <p>Latitude : {{ lieu.latitude }}</p>
        <p>Longitude : {{ lieu.longitude }}</p>#}
    </div>

    <button class="btn" type="submit" name="ajouter">Créer la sortie !</button>
    <button class="btn" type="submit" name="publier">Publier la sortie !</button>
    <a class="btn" href="{{ path('home') }}">Retour</a>
    {{ form_end(sortieForm) }}

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            var idLieu = $(#sortie_lieu).value;
            alert('bonjour');
            var URL;
            URL = {{path('sortie_lieu_id')}};

            $.ajax(
                {
                    url: URL,
                    method: "POST",
                    data: {id : idLieu},
                    success : function (response) {
                        console.log(response);
                    },
                    error : function () {
                        console.log("Erreur");
                    }
                }
            )



/*window.onchange =
        function() {

            var select = document.getElementById('sortie_lieu');
            alert(select.value);
            var req = new XMLHttpRequest();
            req.open("GET", "getLieux.php?id=" + select.value, true);
            req.onload = alert();
            req.send();*/
           /* $.ajax({
                method: "GET",
                url: "{{ path('sortie_lieu_id') }}",
                data: {id: id},
                success: function(){
                    alert("ça s'affiche !");
                    showLieu()
                }
            });*/
        };
    </script>
{% endblock %}
